"""   
Ex 18 - Cows And Bulls

Create a program that will play the “cows and bulls” game with the user. The game works like this:
Randomly generate a 4-digit number.
Ask the user to guess a 4-digit number. 
For every digit that the user guessed correctly in the correct place, they have a “cow”. 
For every digit the user guessed correctly in the wrong place is a “bull.” 
Every time the user makes a guess, tell them how many “cows” and “bulls” they have. 
Once the user guesses the correct number, the game is over. 
Keep track of the number of guesses the user makes throughout teh game and tell the user at the end.

Say the number generated by the computer is 1038. An example interaction could look like this:

  Welcome to the Cows and Bulls Game! 
  Enter a number: 
  >>> 1234
  2 cows, 0 bulls
  >>> 1256
  1 cow, 1 bull
  ...
Until the user guesses the number.

import random

def generate_random_no(digits=4):
    try:
        digits = int(input('Enter the number of digits of the number to be guessed : '))
    except:
        print('By default a 4 digit no. will be generated.')
        pass
    
    print("-"*20)
    num = ''
    for i in range(digits):
        num = num + str(random.randint(0,9))
    return num


def cows_and_bulls(num):
    digits = len(str(num))
    print(f'There are {digits} digits in the number.')
    print('Guess the no. correctly to win the game. Input q at any time to quit.\n')
    guess_count = 0
    print("*"*25)
#     print(num)  # uncomment to see the workings
    cont = True
    while cont:
        cows = 0
        bulls = 0
        guess = input('Your guess: ')
        if guess == 'q':
            print('Game ends.')
            cont = False
            break
        
        if len(guess) != len(num):
            print(f'Input exactly {digits} digits.\n')
            continue
        
        guess_count +=1
        for d in range(len(guess)):
            matches = [True if guess[d] == num[i] == guess[i] else False for i in range(len(guess))]
            matches_found = matches[:d]
            if guess[d] == num[d]:
                cows += 1
#                 print(f'Cow  - {guess[d]} at {d} :{cows}')  # to see the cow verification process
            elif (
                    guess[d] in num[:d]+num[d+1:] and
                    guess[:d+1].count(guess[d]) <= num.count(guess[d]) - (sum(matches) - sum(matches_found))
                 ):
                bulls += 1        
#                 print(f'Bull - {guess[d]} at {d} :{bulls}')  # to see the bull verification process

        print("*"*20)   
        print(f'cows: {cows}')
        print(f'bulls: {bulls}')
        print("*"*20)
        
        if guess == num:
            print(f'The number was {num}.')
            print(f'You guessed correctly after {guess_count} attempts.')
            cont = False
            break


""" Game of Cows & Bulls """

print('You\'re gonna be playing a game of Cows & Bulls.')
play = input('Enter \'y\' if you wish to play? : ')
print('')
if play == 'y':
    print("*"*50)
    print('Awesome!\nIn this game a random number will be generated & you have to guess it.')
    print('Hints will be provided to you as follows:')
    print('1 Cow - for each digit guessed correctly in its correct position.')
    print('1 Bull - for each digit guessed correctly but not in its correct position.\n')
    print('So, let\'s begin.')
    cows_and_bulls(str(generate_random_no()))
else:
    print('Goodday!')
